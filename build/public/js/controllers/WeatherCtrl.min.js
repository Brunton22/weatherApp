angular.module("WeatherCtrl",[]).controller("WeatherController",["$scope","$interval","Weather",function(a,b,c){a.get_curr_time=function(){var b=new Date,c=b.getTime();return a.unix_time=c/1e3,a.unix_time},a.clock_started=!1,a.weather_called=!0,a.no_location_error=!1,a.input=document.getElementById("get-location-form"),a.autocomplete=new google.maps.places.Autocomplete(a.input),a.get_location=function(){a.autocomplete.getPlace()?(a.no_location_error=!1,a.error_no_location="",a.lat=a.autocomplete.getPlace().geometry.location.lat(),a.lng=a.autocomplete.getPlace().geometry.location.lng(),a.time_unix=a.get_curr_time(),c.get_time(a.time_unix,a.lat,a.lng).then(function(b){function c(){1==a.minutes.toString().length&&(a.minutes="0"+a.minutes)}function d(){a.clock_started=!0,setTimeout(function(){a.$apply(function(){a.seconds++,a.seconds<60?d():(a.seconds=(new Date).getSeconds(),a.minutes++,a.minutes<60?(c(),d()):(a.minutes=0,c(),a.hours++,a.hours<24?d():(a.hours=0,d())))})},1e3)}a.location_unix_time=a.time_unix+b.data.dstOffset+b.data.rawOffset,a.location_unix_date=new Date(1e3*a.location_unix_time),a.seconds=a.location_unix_date.getSeconds(),a.minutes=a.location_unix_date.getMinutes(),a.hours=a.location_unix_date.getHours(),c(),0==a.clock_started&&d()},function(a){console.log("Error")}),c.get(a.lat,a.lng).then(function(b){a.temp=b.data.main.temp,a.rnd_temp=Math.round(a.temp),a.weather=b.data,a.weather_icon=a.weather.weather[0].icon,a.weather_called=!1,"01d"==a.weather_icon?a.weather_bg="day-bg":"01n"==a.weather_icon?a.weather_bg="night-bg":"02d"==a.weather_icon?a.weather_bg="day-bg":"02n"==a.weather_icon?a.weather_bg="night-bg":"03d"==a.weather_icon?a.weather_bg="day-bg":"03n"==a.weather_icon?a.weather_bg="night-bg":"04d"==a.weather_icon?a.weather_bg="dull-bg":"04n"==a.weather_icon?a.weather_bg="night-bg":"09d"==a.weather_icon?a.weather_bg="dull-bg":"09n"==a.weather_icon?a.weather_bg="night-bg":"10d"==a.weather_icon?a.weather_bg="dull-bg":"10n"==a.weather_icon?a.weather_bg="night-bg":"11d"==a.weather_icon?a.weather_bg="dull-bg":"11n"==a.weather_icon?a.weather_bg="night-bg":"13d"==a.weather_icon?a.weather_bg="dull-bg":"13n"==a.weather_icon?a.weather_bg="night-bg":"50d"==a.weather_icon?a.weather_bg="dull-bg":"50n"==a.weather_icon&&(a.weather_bg="night-bg")},function(a){console.log("Error")})):a.no_location_error=!0},a.clear_form=function(){a.location_text="",0==a.weather_called&&(a.autocomplete=new google.maps.places.Autocomplete(a.input))}}]);